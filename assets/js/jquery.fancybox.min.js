(function(e,t,n,r){"use strict";var i=n(e),s=n(t),o=n.fancybox=function(){o.open.apply(this,arguments)},u=!1,a=null,f=t.createTouch!==r,l=function(e){return n.type(e)==="string"},c=function(e){return l(e)&&e.indexOf("%")>0},h=function(e,t){t&&c(e)&&(e=o.getViewport()[t]/100*parseInt(e,10));return Math.round(e)+"px"};n.extend(o,{version:"2.0.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,autoSize:!0,autoResize:!f,autoCenter:!f,fitToView:!0,aspectRatio:!1,topRatio:.5,fixed:!1,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},keys:{next:[13,32,34,39,40],prev:[8,33,37,38],close:[27]},index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe class="fancybox-iframe" name="fancybox-frame{rnd}" frameborder="0" hspace="0"'+(n.browser.msie?' allowtransparency="true"':"")+"></iframe>",swf:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="wmode" value="transparent" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{href}" /><embed src="{href}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="100%" height="100%" wmode="transparent"></embed></object>',error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<div title="Close" class="fancybox-item fancybox-close"></div>',next:'<a title="Next" class="fancybox-nav fancybox-next"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev"><span></span></a>'},openEffect:"fade",openSpeed:300,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:300,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:300,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:300,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:{speedIn:0,speedOut:300,opacity:.8,css:{cursor:"pointer"},closeClick:!0},title:{type:"float"}},onCancel:n.noop,beforeLoad:n.noop,afterLoad:n.noop,beforeShow:n.noop,afterShow:n.noop,beforeClose:n.noop,afterClose:n.noop},group:{},opts:{},coming:null,current:null,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(e,t){o.close(!0);e&&!n.isArray(e)&&(e=e instanceof n?n(e).get():[e]);o.isActive=!0;o.opts=n.extend(!0,{},o.defaults,t);n.isPlainObject(t)&&t.keys!==r&&(o.opts.keys=t.keys?n.extend({},o.defaults.keys,t.keys):!1);o.group=e;o._start(o.opts.index||0)},cancel:function(){if(o.coming&&!1===o.trigger("onCancel"))return;o.coming=null;o.hideLoading();o.ajaxLoad&&o.ajaxLoad.abort();o.ajaxLoad=null;o.imgPreload&&(o.imgPreload.onload=o.imgPreload.onabort=o.imgPreload.onerror=null)},close:function(e){o.cancel();if(!o.current||!1===o.trigger("beforeClose"))return;o.unbindEvents();if(!o.isOpen||e&&e[0]===!0){n(".fancybox-wrap").stop().trigger("onReset").remove();o._afterZoomOut()}else{o.isOpen=o.isOpened=!1;n(".fancybox-item, .fancybox-nav").remove();o.wrap.stop(!0).removeClass("fancybox-opened");o.inner.css("overflow","hidden");o.transitions[o.current.closeMethod]()}},play:function(e){var t=function(){clearTimeout(o.player.timer)},r=function(){t();o.current&&o.player.isActive&&(o.player.timer=setTimeout(o.next,o.current.playSpeed))},i=function(){t();n("body").unbind(".player");o.player.isActive=!1;o.trigger("onPlayEnd")},s=function(){if(o.current&&(o.current.loop||o.current.index<o.group.length-1)){o.player.isActive=!0;n("body").bind({"afterShow.player onUpdate.player":r,"onCancel.player beforeClose.player":i,"beforeLoad.player":t});r();o.trigger("onPlayStart")}};o.player.isActive||e&&e[0]===!1?i():s()},next:function(){o.current&&o.jumpto(o.current.index+1)},prev:function(){o.current&&o.jumpto(o.current.index-1)},jumpto:function(e){if(!o.current)return;e=parseInt(e,10);o.group.length>1&&o.current.loop&&(e>=o.group.length?e=0:e<0&&(e=o.group.length-1));if(o.group[e]!==r){o.cancel();o._start(e)}},reposition:function(e,t){var n;if(o.isOpen){n=o._getPosition(t);if(e&&e.type==="scroll"){delete n.position;o.wrap.stop(!0,!0).animate(n,200)}else o.wrap.css(n)}},update:function(e){if(!o.isOpen)return;u||(a=setTimeout(function(){var t=o.current,n=!e||e&&e.type==="orientationchange";if(u){u=!1;if(!t)return;if(!e||e.type!=="scroll"||n){if(t.autoSize&&t.type!=="iframe"){o.inner.height("auto");t.height=o.inner.height()}(t.autoResize||n)&&o._setDimension();t.canGrow&&t.type!=="iframe"&&o.inner.height("auto")}(t.autoCenter||n)&&o.reposition(e);o.trigger("onUpdate")}},200));u=!0},toggle:function(){if(o.isOpen){o.current.fitToView=!o.current.fitToView;o.update()}},hideLoading:function(){s.unbind("keypress.fb");n("#fancybox-loading").remove()},showLoading:function(){o.hideLoading();s.bind("keypress.fb",function(e){if(e.keyCode===27){e.preventDefault();o.cancel()}});n('<div id="fancybox-loading"><div></div></div>').click(o.cancel).appendTo("body")},getViewport:function(){return{x:i.scrollLeft(),y:i.scrollTop(),w:f&&e.innerWidth?e.innerWidth:i.width(),h:f&&e.innerHeight?e.innerHeight:i.height()}},unbindEvents:function(){o.wrap&&o.wrap.unbind(".fb");s.unbind(".fb");i.unbind(".fb")},bindEvents:function(){var e=o.current,t=e.keys;if(!e)return;i.bind("resize.fb orientationchange.fb"+(e.autoCenter&&!e.fixed?" scroll.fb":""),o.update);t&&s.bind("keydown.fb",function(e){var r,i=e.target||e.srcElement;if(!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey&&(!i||!i.type&&!n(i).is("[contenteditable]"))){r=e.keyCode;if(n.inArray(r,t.close)>-1){o.close();e.preventDefault()}else if(n.inArray(r,t.next)>-1){o.next();e.preventDefault()}else if(n.inArray(r,t.prev)>-1){o.prev();e.preventDefault()}}});n.fn.mousewheel&&e.mouseWheel&&o.group.length>1&&o.wrap.bind("mousewheel.fb",function(e,t){var n=e.target||null;if(t!==0&&(!n||n.clientHeight===0||n.scrollHeight===n.clientHeight&&n.scrollWidth===n.clientWidth)){e.preventDefault();o[t>0?"prev":"next"]()}})},trigger:function(e,t){var r,i=t||o[n.inArray(e,["onCancel","beforeLoad","afterLoad"])>-1?"coming":"current"];if(!i)return;n.isFunction(i[e])&&(r=i[e].apply(i,Array.prototype.slice.call(arguments,1)));if(r===!1)return!1;i.helpers&&n.each(i.helpers,function(t,r){r&&n.isPlainObject(o.helpers[t])&&n.isFunction(o.helpers[t][e])&&o.helpers[t][e](r,i)});n.event.trigger(e+".fb")},isImage:function(e){return l(e)&&e.match(/\.(jpe?g|gif|png|bmp)((\?|#).*)?$/i)},isSWF:function(e){return l(e)&&e.match(/\.(swf)((\?|#).*)?$/i)},_start:function(e){var t={},r=o.group[e]||null,i,s,u,a,f;if(r&&(r.nodeType||r instanceof n)){i=!0;n.metadata&&(t=n(r).metadata())}t=n.extend(!0,{},o.opts,{index:e,element:r},n.isPlainObject(r)?r:t);n.each(["href","title","content","type"],function(e,s){t[s]=o.opts[s]||i&&n(r).attr(s)||t[s]||null});typeof t.margin=="number"&&(t.margin=[t.margin,t.margin,t.margin,t.margin]);t.modal&&n.extend(!0,t,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{css:{cursor:"auto"},closeClick:!1}}});o.coming=t;if(!1===o.trigger("beforeLoad")){o.coming=null;return}u=t.type;s=t.href||r;if(!u){if(i){u=n(r).data("fancybox-type");if(!u){a=r.className.match(/fancybox\.(\w+)/);u=a?a[1]:null}}!u&&l(s)&&(o.isImage(s)?u="image":o.isSWF(s)?u="swf":s.match(/^#/)&&(u="inline"));u||(u=i?"inline":"html");t.type=u}if(u==="inline"||u==="html"){t.content||(u==="inline"?t.content=n(l(s)?s.replace(/.*(?=#[^\s]+$)/,""):s):t.content=r);if(!t.content||!t.content.length)u=null}else s||(u=null);if(u==="ajax"&&l(s)){f=s.split(/\s+/,2);s=f.shift();t.selector=f.shift()}t.href=s;t.group=o.group;t.isDom=i;switch(u){case"image":o._loadImage();break;case"ajax":o._loadAjax();break;case"inline":case"iframe":case"swf":case"html":o._afterLoad();break;default:o._error("type")}},_error:function(e){o.hideLoading();n.extend(o.coming,{type:"html",autoSize:!0,minWidth:0,minHeight:0,padding:15,hasError:e,content:o.coming.tpl.error});o._afterLoad()},_loadImage:function(){var e=o.imgPreload=new Image;e.onload=function(){this.onload=this.onerror=null;o.coming.width=this.width;o.coming.height=this.height;o._afterLoad()};e.onerror=function(){this.onload=this.onerror=null;o._error("image")};e.src=o.coming.href;(e.complete===r||!e.complete)&&o.showLoading()},_loadAjax:function(){o.showLoading();o.ajaxLoad=n.ajax(n.extend({},o.coming.ajax,{url:o.coming.href,error:function(e,t){o.coming&&t!=="abort"?o._error("ajax",e):o.hideLoading()},success:function(e,t){if(t==="success"){o.coming.content=e;o._afterLoad()}}}))},_preloadImages:function(){var e=o.group,t=o.current,r=e.length,i,s,u,a=Math.min(t.preload,r-1);if(!t.preload||e.length<2)return;for(u=1;u<=a;u+=1){i=e[(t.index+u)%r];s=i.href||n(i).attr("href")||i;if(i.type==="image"||o.isImage(s))(new Image).src=s}},_afterLoad:function(){o.hideLoading();if(!o.coming||!1===o.trigger("afterLoad",o.current)){o.coming=!1;return}if(o.isOpened){n(".fancybox-item, .fancybox-nav").remove();o.wrap.stop(!0).removeClass("fancybox-opened");o.inner.css("overflow","hidden");o.transitions[o.current.prevMethod]()}else{n(".fancybox-wrap").stop().trigger("onReset").remove();o.trigger("afterClose")}o.unbindEvents();o.isOpen=!1;o.current=o.coming;o.wrap=n(o.current.tpl.wrap).addClass("fancybox-"+(f?"mobile":"desktop")+" fancybox-type-"+o.current.type+" fancybox-tmp "+o.current.wrapCSS).appendTo("body");o.skin=n(".fancybox-skin",o.wrap).css("padding",h(o.current.padding));o.outer=n(".fancybox-outer",o.wrap);o.inner=n(".fancybox-inner",o.wrap);o._setContent()},_setContent:function(){var e=o.current,t=e.content,r=e.type,i=e.minWidth,s=e.minHeight,u=e.maxWidth,a=e.maxHeight,l;switch(r){case"inline":case"ajax":case"html":if(e.selector)t=n("<div>").html(t).find(e.selector);else if(t instanceof n){t.parent().hasClass("fancybox-inner")&&t.parents(".fancybox-wrap").unbind("onReset");t=t.show().detach();n(o.wrap).bind("onReset",function(){t.appendTo("body").hide()})}if(e.autoSize){l=n('<div class="fancybox-wrap '+o.current.wrapCSS+' fancybox-tmp"></div>').appendTo("body").css({minWidth:h(i,"w"),minHeight:h(s,"h"),maxWidth:h(u,"w"),maxHeight:h(a,"h")}).append(t);e.width=l.width();e.height=l.height();l.width(o.current.width);if(l.height()>e.height){l.width(e.width+1);e.width=l.width();e.height=l.height()}t=l.contents().detach();l.remove()}break;case"image":t=e.tpl.image.replace("{href}",e.href);e.aspectRatio=!0;break;case"swf":t=e.tpl.swf.replace(/\{width\}/g,e.width).replace(/\{height\}/g,e.height).replace(/\{href\}/g,e.href);break;case"iframe":t=n(e.tpl.iframe.replace("{rnd}",(new Date).getTime())).attr("scrolling",e.scrolling).attr("src",e.href);e.scrolling=f?"scroll":"auto"}if(r==="image"||r==="swf"){e.autoSize=!1;e.scrolling="visible"}if(r==="iframe"&&e.autoSize){o.showLoading();o._setDimension();o.inner.css("overflow",e.scrolling);t.bind({onCancel:function(){n(this).unbind();o._afterZoomOut()},load:function(){o.hideLoading();try{this.contentWindow.document.location&&(o.current.height=n(this).contents().find("body").height())}catch(e){o.current.autoSize=!1}o[o.isOpen?"_afterZoomIn":"_beforeShow"]()}}).appendTo(o.inner)}else{o.inner.append(t);o._beforeShow()}},_beforeShow:function(){o.coming=null;o.trigger("beforeShow");o._setDimension();o.wrap.hide().removeClass("fancybox-tmp");o.bindEvents();o._preloadImages();o.transitions[o.isOpened?o.current.nextMethod:o.current.openMethod]()},_setDimension:function(){var e=o.wrap,t=o.inner,r=o.current,i=o.getViewport(),s=r.margin,u=r.padding*2,a=r.width,f=r.height,l=r.maxWidth+u,p=r.maxHeight+u,d=r.minWidth+u,v=r.minHeight+u,m,g;i.w-=s[1]+s[3];i.h-=s[0]+s[2];c(a)&&(a=(i.w-u)*parseFloat(a)/100);c(f)&&(f=(i.h-u)*parseFloat(f)/100);m=a/f;a+=u;f+=u;if(r.fitToView){l=Math.min(i.w,l);p=Math.min(i.h,p)}if(r.aspectRatio){if(a>l){a=l;f=(a-u)/m+u}if(f>p){f=p;a=(f-u)*m+u}if(a<d){a=d;f=(a-u)/m+u}if(f<v){f=v;a=(f-u)*m+u}}else{a=Math.max(d,Math.min(a,l));f=Math.max(v,Math.min(f,p))}a=Math.round(a);f=Math.round(f);n(e.add(t)).width("auto").height("auto");t.width(a-u).height(f-u);e.width(a);g=e.height();if(a>l||g>p)while((a>l||g>p)&&a>d&&g>v){f-=10;if(r.aspectRatio){a=Math.round((f-u)*m+u);if(a<d){a=d;f=(a-u)/m+u}}else a-=10;t.width(a-u).height(f-u);e.width(a);g=e.height()}r.dim={width:h(a),height:h(g)};r.canGrow=r.autoSize&&f>v&&f<p;r.canShrink=!1;r.canExpand=!1;a-u<r.width||f-u<r.height?r.canExpand=!0:(a>i.w||g>i.h)&&a>d&&f>v&&(r.canShrink=!0);o.innerSpace=g-u-t.height()},_getPosition:function(e){var t=o.current,n=o.getViewport(),r=t.margin,i=o.wrap.width()+r[1]+r[3],s=o.wrap.height()+r[0]+r[2],u={position:"absolute",top:r[0]+n.y,left:r[3]+n.x};t.autoCenter&&t.fixed&&!e&&s<=n.h&&i<=n.w&&(u={position:"fixed",top:r[0],left:r[3]});u.top=h(Math.max(u.top,u.top+(n.h-s)*t.topRatio));u.left=h(Math.max(u.left,u.left+(n.w-i)*.5));return u},_afterZoomIn:function(){var e=o.current,t=e?e.scrolling:"no";if(!e)return;o.isOpen=o.isOpened=!0;o.wrap.addClass("fancybox-opened");o.inner.css("overflow",t==="yes"?"scroll":t==="no"?"hidden":t);o.trigger("afterShow");o.update();(e.closeClick||e.nextClick)&&o.inner.css("cursor","pointer").bind("click.fb",function(t){!n(t.target).is("a")&&!n(t.target).parent().is("a")&&o[e.closeClick?"close":"next"]()});e.closeBtn&&n(e.tpl.closeBtn).appendTo(o.skin).bind("click.fb",o.close);if(e.arrows&&o.group.length>1){(e.loop||e.index>0)&&n(e.tpl.prev).appendTo(o.outer).bind("click.fb",o.prev);(e.loop||e.index<o.group.length-1)&&n(e.tpl.next).appendTo(o.outer).bind("click.fb",o.next)}if(o.opts.autoPlay&&!o.player.isActive){o.opts.autoPlay=!1;o.play()}},_afterZoomOut:function(){var e=o.current;o.wrap.trigger("onReset").remove();n.extend(o,{group:{},opts:{},current:null,isActive:!1,isOpened:!1,isOpen:!1,wrap:null,skin:null,outer:null,inner:null});o.trigger("afterClose",e)}});o.transitions={getOrigPosition:function(){var e=o.current,t=e.element,r=e.padding,i=n(e.orig),s={},u=50,a=50,f;if(!i.length&&e.isDom&&n(t).is(":visible")){i=n(t).find("img:first");i.length||(i=n(t))}if(i.length){s=i.offset();if(i.is("img")){u=i.outerWidth();a=i.outerHeight()}}else{f=o.getViewport();s.top=f.y+(f.h-a)*.5;s.left=f.x+(f.w-u)*.5}s={top:h(s.top-r),left:h(s.left-r),width:h(u+r*2),height:h(a+r*2)};return s},step:function(e,t){var n=t.prop,r,i;if(n==="width"||n==="height"){r=Math.ceil(e-o.current.padding*2);if(n==="height"){i=(e-t.start)/(t.end-t.start);t.start>t.end&&(i=1-i);r-=o.innerSpace*i}o.inner[n](r)}},zoomIn:function(){var e=o.wrap,t=o.current,r=t.openEffect,i=r==="elastic",s=t.dim,u=n.extend({},s,o._getPosition(i)),a=n.extend({opacity:1},u);delete a.position;if(i){u=this.getOrigPosition();t.openOpacity&&(u.opacity=0);o.outer.add(o.inner).width("auto").height("auto")}else r==="fade"&&(u.opacity=0);e.css(u).show().animate(a,{duration:r==="none"?0:t.openSpeed,easing:t.openEasing,step:i?this.step:null,complete:o._afterZoomIn})},zoomOut:function(){var e=o.wrap,t=o.current,n=t.openEffect,r=n==="elastic",i={opacity:0};if(r){e.css("position")==="fixed"&&e.css(o._getPosition(!0));i=this.getOrigPosition();t.closeOpacity&&(i.opacity=0)}e.animate(i,{duration:n==="none"?0:t.closeSpeed,easing:t.closeEasing,step:r?this.step:null,complete:o._afterZoomOut})},changeIn:function(){var e=o.wrap,t=o.current,n=t.nextEffect,r=n==="elastic",i=o._getPosition(r),s={opacity:1};i.opacity=0;if(r){i.top=h(parseInt(i.top,10)-200);s.top="+=200px"}e.css(i).show().animate(s,{duration:n==="none"?0:t.nextSpeed,easing:t.nextEasing,complete:o._afterZoomIn})},changeOut:function(){var e=o.wrap,t=o.current,r=t.prevEffect,i={opacity:0},s=function(){n(this).trigger("onReset").remove()};e.removeClass("fancybox-opened");r==="elastic"&&(i.top="+=200px");e.animate(i,{duration:r==="none"?0:t.prevSpeed,easing:t.prevEasing,complete:s})}};o.helpers.overlay={overlay:null,update:function(){var e,r,o;this.overlay.width("100%").height("100%");if(n.browser.msie||f){r=Math.max(t.documentElement.scrollWidth,t.body.scrollWidth);o=Math.max(t.documentElement.offsetWidth,t.body.offsetWidth);e=r<o?i.width():r}else e=s.width();this.overlay.width(e).height(s.height())},beforeShow:function(e){if(this.overlay)return;e=n.extend(!0,{},o.defaults.helpers.overlay,e);this.overlay=n('<div id="fancybox-overlay"></div>').css(e.css).appendTo("body");e.closeClick&&this.overlay.bind("click.fb",o.close);if(o.current.fixed&&!f)this.overlay.addClass("overlay-fixed");else{this.update();this.onUpdate=function(){this.update()}}this.overlay.fadeTo(e.speedIn,e.opacity)},afterClose:function(e){this.overlay&&this.overlay.fadeOut(e.speedOut||0,function(){n(this).remove()});this.overlay=null}};o.helpers.title={beforeShow:function(e){var t,r=o.current.title;if(r){t=n('<div class="fancybox-title fancybox-title-'+e.type+'-wrap">'+r+"</div>").appendTo("body");if(e.type==="float"){t.width(t.width());t.wrapInner('<span class="child"></span>');o.current.margin[2]+=Math.abs(parseInt(t.css("margin-bottom"),10))}t.appendTo(e.type==="over"?o.inner:e.type==="outside"?o.wrap:o.skin)}}};n.fn.fancybox=function(e){var t=n(this),r=this.selector||"",i,u=function(s){var u=this,a=i,f,l;if(!(s.ctrlKey||s.altKey||s.shiftKey||s.metaKey)&&!n(u).is(".fancybox-wrap")){s.preventDefault();f=e.groupAttr||"data-fancybox-group";l=n(u).attr(f);if(!l){f="rel";l=u[f]}if(l&&l!==""&&l!=="nofollow"){u=r.length?n(r):t;u=u.filter("["+f+'="'+l+'"]');a=u.index(this)}e.index=a;o.open(u,e)}};e=e||{};i=e.index||0;r?s.undelegate(r,"click.fb-start").delegate(r,"click.fb-start",u):t.unbind("click.fb-start").bind("click.fb-start",u);return this};n(t).ready(function(){o.defaults.fixed=n.support.fixedPosition||!(n.browser.msie&&n.browser.version<=6)&&!f})})(window,document,jQuery);