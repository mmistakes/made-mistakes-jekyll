{% assign gallery = post.gallery | default: page.gallery %}
{% if gallery %}
  <ul class="gallery columns-3">
    {% for img in gallery %}
      {% if img.url contains '://' %}
        {% assign url = img.url %}
      {% else %}
        {% assign url = img.url | relative_url %}
      {% endif %}
      {% assign image_lq_path = img.image_lq_path | default: 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==' %}

      <li class="gallery-item">
        {% if img.url %}
          <a {% if img.class %}class="{{ img.class }}"{% endif %} href="{{ url }}" {% if img.title %}title="{{ img.title }}"{% endif %}>
            {% lazyload data-src="{{ img.image_path }}" src="{{ image_lq_path }}" alt="{{ img.alt }}" %}
          </a>
        {% else %}
          {% lazyload data-src="{{ img.image_path }}" src="{{ image_lq_path }}" alt="{{ img.alt }}" %}
        {% endif %}
      </li>
    {% endfor %}
  </ul>
{% endif %}
