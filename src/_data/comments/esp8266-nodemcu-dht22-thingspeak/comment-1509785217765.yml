_id: a40bceba-cdb7-4e5d-8470-fbdffa39a996
_parent: /projects/esp8266-nodemcu-dht22-thingspeak/
message: "Hi Poul,\n\nHave tried and just cannot get the Thingspeak and oled code combined. Think its to do with the order of the calls and if they are in the loop() or not.\n\nWorking oled code is:\n\n**  ```lua\r\ntemperature = 0\r\nhumidity = 0\n\ndht=require(\"dht\")\r\npin = 2\r\nstatus,temp,humi,temp_decimial,humi_decimial = dht.read(pin)\r\nif( status == dht.OK ) then\r\n  -- Float firmware using this example\r\n  print(\"DHT Temperature:\"..temp..\";\"..\"Humidity:\"..humi)\r\nelseif( status == dht.ERROR_CHECKSUM ) then\r\n  print(\"DHT Checksum error.\");\nelseif( status == dht.ERROR_TIMEOUT ) then\r\n  print(\"DHT Time out.\");\r\nend\n\nmyStr1 = \"Temp is \"..temp..\" degC\"\r\nmyStr2 = \"Hum is \"..humi..\" %\"\n\nfunction init_spi_display()\r\n  -- Hardware SPI CLK  = GPIO14\r\n  -- Hardware SPI MOSI = GPIO13\r\n  -- Hardware SPI MISO = GPIO12 (not used)\r\n  -- CS, D/C, and RES can be assigned freely to available GPIOs\r\n  local cs  = 8 -- GPIO15, pull-down 10k to GND\r\n  local dc  = 4 -- GPIO2\r\n  local res = 1 -- GPIO5\r\n  spi.setup(1, spi.MASTER, spi.CPOL_LOW, spi.CPHA_LOW, 8, 8)\r\n  disp = u8g.ssd1306_128x64_hw_spi(cs, dc, res)\r\nend\n\nfunction draw()\r\n  disp:setFont(u8g.font_6x10)\r\n  disp:drawStr(10,30,myStr1)\r\n  disp:drawStr(10,50,myStr2)\n\nend\n\nfunction display()\r\n  disp:firstPage()\r\nrepeat\r\ndraw()\r\nuntil disp:nextPage() == false\r\ndisplay();\r\nend\n\ninit_spi_display()\r\ndisplay()```\n\n**\r\nAny thoughts? This has been driving me crazy!\n\nMany thanks,\n\nSimon"
name: simon
email: 25d900711612d0a51c598f7d599df4f7
url: ''
replying_to: ''
hidden: ''
date: '2016-10-17T20:31:38.000Z'